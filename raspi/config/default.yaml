# 摄像头参数
camera:
  device_index: 0
  width: 1280
  height: 720
  fps: 30
  flip_x: false
  flip_y: true  # 根据安装方向调整
  perspective_correction: false

# YOLO 模型与推理
detector:
  # 模型路径：如果文件不存在，会自动使用 YOLOv8n 预训练模型（COCO 数据集，包含 fish 类别）
  # 可以使用以下选项：
  # 1. 自定义模型: "/home/pi/fishcar/raspi/models/best.pt"
  # 2. 预训练模型: "yolov8n.pt" (nano, 最快) 或 "yolov8s.pt" (small, 更准确)
  weights_path: "/home/pi/fishcar/raspi/models/best.pt"
  conf_threshold: 0.5
  iou_threshold: 0.45
  classes: null  # 单目标时保持 null。使用 COCO 预训练模型时，fish 类别 ID 是 15
  max_detections: 1
  smoothing:
    enabled: true
    alpha: 0.6

# 坐标映射与速度控制
motion_mapping:
  deadzone: 0.1
  gain_x: 0.8
  gain_y: 0.8
  gain_rotation: 0.0
  max_speed: 1.0
  min_speed: 0.15
  invert_x: false
  invert_y: false
  reference_width: 1280
  reference_height: 720

# 串口通信
serial:
  port: "/dev/ttyUSB0"  # USB 转串口设备（CH340）
  baudrate: 9600
  timeout: 0.1
  heartbeat_interval: 0.0
  watchdog_timeout: 0.5

# 可视化与日志
visualization:
  enabled: true
  window_name: "FishCar Tracker"
  show_vectors: true
  show_fps: true
  show_aquarium_bounds: true  # 显示鱼缸边界
  show_relative_coords: true  # 显示相对坐标
  show_trajectory: true  # 显示小车移动轨迹

# 轨迹记录
trajectory:
  enabled: true  # 启用轨迹记录
  max_points: 1000  # 最大记录点数
  sample_interval: 0.1  # 采样间隔（秒）
  save_path: "/home/pi/fishcar/raspi/logs/trajectory.json"  # 保存路径（null 则不保存）

# 标定文件路径
calibration_path: "/home/pi/fishcar/raspi/config/calibration.json"

logging:
  level: "INFO"
  file: "/home/pi/fishcar/raspi/logs/runtime.log"

